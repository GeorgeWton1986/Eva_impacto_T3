#Limpiar la consola
cat("\f")
#Limpiar el Global Environment
rm(list = ls())
#Incluir las librerias
if(!require(pacman)) install.packages("pacman") ; require(pacman)
p_load(haven,   #Leer archivos .dta
dplyr,   #Manipular datos
stargazer,  #Visualizar tablas de regresión
fixest,  #Calcular los efectos fijos
plm,  #Datos de panel
knitr,   #Visualizar tablas adicionales
ivreg  #Regresiones por variables instrumentales
)
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T3/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/data_1"))
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T3/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/data_1.dta"))
# Definir URL del repositorio
github_url <- "https://raw.githubusercontent.com/GeorgeWton1986/Eva_impacto_T3/main"
# Cargar datos
BD_0 <- read_dta(paste0(github_url, "/Data/data_1.dta"))
# Ver estructura de los datos
glimpse(BD_0)
head(BD_0)
# Verificar los nombres de la columnas
colnames(BD_0)
View(BD_0)
#filtrar los datos de endline 1
el1_data <- BD_0 %>% filter(sample1 == 1)
#Verificar que tenemos los datos correctos
cat("Observaciones en endline 1:", nrow(el1_data), "\n")
#Variables de control especificadas en el taller
controls_formula <- "area_pop_base + area_business_total_base + area_exp_pc_mean_base + area_literate_head_base + area_literate_base + area_debt_total_base"
#Regresión columna 1 spandana_1
mod_1 <- feols(as.formula(paste("spandana_1 ~ treatment +", controls_formula)),
data = el1_data,
weights = ~w1,
cluster = ~areaid)
#Regresión columna 3 anymfi_1
mod_3 <- feols(as.formula(paste("anymfi_1 ~ treatment +", controls_formula)),
data = el1_data,
weights = ~w1,
cluster = ~areaid)
#Extraer coeficientes y errores estándar
coef_mod_1 <- round(coef(mod_1)["treatment"], 4)
se_mod_1 <- round(se(mod_1)["treatment"], 4)
pval_mod_1 <- round(pvalue(mod_1)["treatment"], 4)
coef_mod_3 <- round(coef(mod_3)["treatment"], 4)
se_mod_3 <- round(se(mod_3)["treatment"], 4)
pval_mod_3 <- round(pvalue(mod_3)["treatment"], 4)
#Extraer coeficientes y errores estándar
coef_mod_1 <- round(coef(mod_1)["treatment"], 4)
se_mod_1 <- round(se(mod_1)["treatment"], 4)
pval_mod_1 <- round(pvalue(mod_1)["treatment"], 4)
coef_mod_3 <- round(coef(mod_3)["treatment"], 4)
se_mod_3 <- round(se(mod_3)["treatment"], 4)
pval_mod_3 <- round(pvalue(mod_3)["treatment"], 4)
# Crear tabla de resultados
results_1_3 <- data.frame(
Variable = c("Spandana (Columna 1)", "Any MFI (Columna 3)"),
Coeficiente = c(coef_mod_1, coef_mod_3),
Error_Estandar = c(se_mod_1, se_mod_3),
P_valor = c(pval_mod_1, pval_mod_3),
Observaciones = c(nobs(mod_1), nobs(mod_3))
)
# Mostrar tabla
cat("\n=== RESULTADOS PREGUNTA 2b ===\n")
print(results_1_3)
# Tabla más elegante con stargazer (opcional)
stargazer(mod_1, mod_3,
title = "Tabla 2, Panel A - Efecto del Tratamiento en Acceso a Crédito",
dep.var.labels = c("Préstamo Spandana", "Cualquier MFI"),
covariate.labels = "Área Tratada",
keep = "treatment",
digits = 4,
type = "text")
```
#Extraer coeficientes y errores estándar
coef_mod_1 <- round(coef(mod_1)["treatment"], 3)
se_mod_1 <- round(se(mod_1)["treatment"], 3)
pval_mod_1 <- round(pvalue(mod_1)["treatment"], 3)
coef_mod_3 <- round(coef(mod_3)["treatment"], 3)
se_mod_3 <- round(se(mod_3)["treatment"], 3)
pval_mod_3 <- round(pvalue(mod_3)["treatment"], 3)
# Crear tabla de resultados
results_1_3 <- data.frame(
Variable = c("Spandana (Columna 1)", "Any MFI (Columna 3)"),
Coeficiente = c(coef_mod_1, coef_mod_3),
Error_Estandar = c(se_mod_1, se_mod_3),
P_valor = c(pval_mod_1, pval_mod_3),
Observaciones = c(nobs(mod_1), nobs(mod_3))
)
# Mostrar tabla
cat("\n=== RESULTADOS PREGUNTA 2b ===\n")
print(results_1_3)
# Tabla más elegante con stargazer (opcional)
stargazer(mod_1, mod_3,
title = "Tabla 2, Panel A - Efecto del Tratamiento en Acceso a Crédito",
dep.var.labels = c("Préstamo Spandana", "Cualquier MFI"),
covariate.labels = "Área Tratada",
keep = "treatment",
digits = 3,
type = "text")
